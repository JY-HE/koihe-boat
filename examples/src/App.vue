<template>
    <div class="con" ref="conRef">
        <boat-button @click="handleRetry">é»˜è®¤æŒ‰é’®</boat-button>
        <boat-button type="primary" @click="handleCancel">ä¸»è¦æŒ‰é’®</boat-button>
        <boat-button type="error" @click="handleClose">å±é™©æŒ‰é’®</boat-button>
        <boat-button type="success">æˆåŠŸæŒ‰é’®</boat-button>
        <boat-button type="warning">è­¦å‘ŠæŒ‰é’®</boat-button>
        <boat-button type="info">ä¿¡æ¯æŒ‰é’®</boat-button>
        <boat-button type="link">è¿™æ˜¯ä¸ªé“¾æ¥</boat-button>

        <boat-notification
            ref="notificationRef"
            title="æˆåŠŸ"
            :duration="0"
            icon="search"
            position="bottom-left"
            content="345463"
            show-footer-button
            footer-button-text="è¿™æ˜¯ä¸ªæŒ‰é’®2135235"
        >
            <div>11215266</div>
            <template #footer>
                <boat-button @click="() => console.log(457547)">è¿™æ˜¯ä¸ªæŒ‰é’®1</boat-button>
            </template>
        </boat-notification>

        <boat-progress-notification
            ref="progressNotificationRef"
            title="ä¸Šä¼ æ–‡ä»¶"
            :message="file.name"
            :status="status"
            :duration="3000"
            @retry="handleRetry"
            @cancel="handleCancel"
            @close="handleClose"
        />
    </div>
</template>
<script setup lang="ts">
import { ref, h } from 'vue';
import { BoatNotification } from '@koihe/boat-ui';
import '@koihe/boat-ui/es/notification/style/index';

const status = ref<'success' | 'error' | ''>('' as const);
const file = ref({ name: 'example.pdf' });
const conRef = ref<HTMLElement | null>(null);

setTimeout(() => {
    status.value = 'success';
}, 5000);

const notificationRef = ref<InstanceType<typeof BoatNotification> | null>(null);

const handleRetry = () => {
    notificationRef.value = BoatNotification.notify({
        type: 'success',
        title: 'è¿™æ˜¯ä¸ªæ ‡é¢˜',
        duration: 0,
        content: h(
            'div',
            'è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯'
        ),
        position: 'bottom-right',
    });
};

const handleCancel = () => {
    BoatNotification.notify({
        title: 'è¿™æ˜¯ä¸ªæ ‡é¢˜',
        duration: 0,
        content: () => h('div', [h('span', 'è¿™æ˜¯ä¸€æ¡'), h('strong', 'é‡è¦æ¶ˆæ¯')]),
        position: 'top-right',
    });

    // BoatNotification.notify({
    //     title: 'è¿™æ˜¯ä¸ªæ ‡é¢˜',
    //     duration: 0,
    //     content: () => h('div', [h('span', 'è¿™æ˜¯ä¸€æ¡'), h('strong', 'é‡è¦æ¶ˆæ¯')]),
    //     position: 'top-right',
    // });
};

const handleClose = () => {
    notificationRef.value?.close();
    console.log('ğŸš€ ~ App.vue:85 ~ notificationRef.value:', notificationRef.value);
    console.log('notification closed');
};
</script>
